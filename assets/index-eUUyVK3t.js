var L=Object.defineProperty;var x=s=>{throw TypeError(s)};var b=(s,e,t)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>b(s,typeof e!="symbol"?e+"":e,t),y=(s,e,t)=>e.has(s)||x("Cannot "+t);var l=(s,e,t)=>(y(s,e,"read from private field"),t?t.call(s):e.get(s)),c=(s,e,t)=>e.has(s)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),a=(s,e,t,r)=>(y(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const I of i.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&r(I)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function T(s){let e=s.length;for(;e!=0;){let t=Math.floor(Math.random()*e);e--,[s[e],s[t]]=[s[t],s[e]]}}var S,w,f,g,h,d;class E{constructor(e,t,r,o=!0,i=!1){c(this,S);c(this,w);c(this,f);c(this,g);c(this,h);c(this,d);a(this,S,t),a(this,w,e),a(this,f,r),a(this,g,o),a(this,h,i)}get col(){return l(this,S)}get row(){return l(this,w)}get open(){return l(this,h)}get free(){return l(this,g)}get color(){return l(this,f)}set element(e){a(this,d,e)}set free(e){a(this,g,e)}addEventClick(){l(this,d)&&l(this,d).addEventListener("click",e=>{l(this,h)||(l(this,d).style.backgroundColor=l(this,f),a(this,h,!0))})}resetColor(){l(this,d).style.backgroundColor="black",a(this,h,!1)}}S=new WeakMap,w=new WeakMap,f=new WeakMap,g=new WeakMap,h=new WeakMap,d=new WeakMap;class O{constructor(e="timer"){n(this,"min");n(this,"sec");n(this,"ms");n(this,"count");n(this,"malt");n(this,"salt");n(this,"msalt");n(this,"idElement");if(this.idElement=e,localStorage.getItem("timer")!==null){let t=JSON.parse(localStorage.getItem("timer"));this.sec=parseInt(t.sec),this.min=parseInt(t.min),this.ms=parseInt(t.ms)}else this.ms=0,this.sec=0,this.min=0}start(){this.count=setInterval(()=>{if(this.ms==100)if(this.ms=0,this.sec==60)this.sec=0,this.min++;else{if(this.sec%2==0){let e={sec:this.sec,ms:this.ms,min:this.min};localStorage.setItem("timer",JSON.stringify(e))}this.sec++}else this.ms++;this.malt=this.pad(this.min),this.salt=this.pad(this.sec),this.msalt=this.pad(this.ms),this.update(this.malt+":"+this.salt+":"+this.msalt)},10)}stop(){clearInterval(this.count)}update(e){let t=document.getElementById(this.idElement);t.firstChild.nodeValue=e}pad(e){let t;return e<10?t="0"+e:t=e,t}}var u,p,C,m;class B{constructor(e,t,r="game"){c(this,u);c(this,p);c(this,C);c(this,m);n(this,"element");n(this,"timer");a(this,u,e),a(this,p,t),a(this,C,r),this.element=document.getElementById(r),a(this,m,[]),this.createBoxes(),this.paintBoxes(),this.element.addEventListener("click",()=>{this.checkOpenBoxes()}),this.initTimer()}get cols(){return l(this,p)}get rows(){return l(this,u)}checkOpenBoxes(){let e=l(this,m).filter(t=>t.open&&t.free);e.length==2?e[0].color===e[1].color?(e.map(t=>{t.free=!1}),this.arrayBoxesToLocalStorage()):setTimeout(()=>{e.map(t=>{t.resetColor()})},500):this.arrayBoxesToLocalStorage(),this.checkFinishGame()}checkFinishGame(){l(this,m).filter(t=>t.free).length===0&&setTimeout(()=>{this.timer.stop(),alert("Juego Finalizado!")},200)}createRandomColors(){let e=[];for(let t=0;t<l(this,p)*l(this,u)/2;t++){let r=Math.floor(Math.random()*256),o=Math.floor(Math.random()*256),i=Math.floor(Math.random()*256),I=`rgb(${r}, ${o}, ${i})`;e.push(I)}return e=[...e,...e],T(e),e}createBoxes(){if(a(this,m,[]),localStorage.getItem("boxes")!==null)JSON.parse(localStorage.getItem("boxes")).map(t=>{let r=new E(t.row,t.col,t.color,t.free,t.open);l(this,m).push(r)});else{let e=this.createRandomColors();for(let t=0;t<l(this,u);t++)for(let r=0;r<l(this,p);r++){let o=e.shift(),i=new E(t,r,o);l(this,m).push(i)}this.arrayBoxesToLocalStorage()}}arrayBoxesToLocalStorage(){let e=l(this,m).map(t=>({row:t.row,col:t.col,color:t.color,free:t.free,open:t.open}));localStorage.setItem("boxes",JSON.stringify(e))}paintBoxes(){let e=document.createElement("header");e.setAttribute("id","boxHeader"),this.element.appendChild(e);let t=document.createElement("div");t.setAttribute("id","boxContainer"),this.element.appendChild(t),this.setCSSBoxTemplates(),l(this,m).map(r=>{let o=document.createElement("div");o.classList.add("box"),(!r.free||r.open)&&(o.style.backgroundColor=r.color),r.element=o,r.addEventClick(),t.appendChild(o)})}initTimer(){let e=document.createElement("h2");e.setAttribute("id","timerContainer"),e.innerHTML='<span id="timer">00:00:00</span>',document.getElementById("boxHeader").appendChild(e),this.timer=new O,this.timer.start()}setCSSBoxTemplates(){let e=document.getElementById("boxContainer");e.style.gridTemplateColumns=`repeat(${this.cols}, 1fr)`,e.style.gridTemplateRows=`repeat(${this.rows}, 1fr)`}static getColsRows(){let e,t;if(localStorage.getItem("rows")!==null&&localStorage.getItem("cols")!==null)e=parseInt(localStorage.getItem("rows")),t=parseInt(localStorage.getItem("cols"));else{for(e=parseInt(prompt("Enter the number of rows.")),t=parseInt(prompt("Enter the number of columns."));e*t%2!==0;)alert("The number of cards must be even, re-enter the data"),e=parseInt(prompt("Enter the number of rows.")),t=parseInt(prompt("Enter the number of columns."));localStorage.setItem("rows",e),localStorage.setItem("cols",t)}return{rows:e,cols:t}}static resetGame(){localStorage.removeItem("cols"),localStorage.removeItem("rows"),localStorage.removeItem("boxes"),localStorage.removeItem("timer"),location.reload()}}u=new WeakMap,p=new WeakMap,C=new WeakMap,m=new WeakMap;let M=document.getElementById("reset");M.addEventListener("click",()=>{B.resetGame()});let v=B.getColsRows();new B(v.rows,v.cols,"game");
